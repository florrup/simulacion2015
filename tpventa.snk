[Subsistema nuevo]
;*************************************** TABLES Y QTABLES ***********************************
		
;*************************************** STORAGES *******************************************
		
PREPARAR		STORAGE	2
		
;*************************************** VARIABLES ****************************************** 
		
CJTOPIEZAS		VARIABLE	P$PIEZAS / 20		;SE PREPARAN DE A 20 PIEZAS
		
;*************************************** FUNCIONES ******************************************
		 
CANTPRODUCTOS	FUNCTION	RN3, C4	
0, 1 / 0.6, 12 / 0.95, 20 / 1, 101
				
CANTPIEZAS		FUNCTION	RN4, C7	
0, 1 / 0.14, 20 / 0.31, 50 / 0.53, 200 / 0.82, 500 / 0.99, 2000 / 1, 15001
		
;*************************************** INICIALIZACION DE SAVEVALUES ***********************
		
;*************************************** RELOJ EN EL HORARIO DE 8 A 18 **********************
		
		GENERATE		3600			;START 10 - SON DIEZ HORAS SIMULADAS
		TERMINATE		1	
	
;*************************************** SUBSISTEMA A SIMULAR *******************************
		
		GENERATE		420, 300 		 
		ASSIGN		PRODUCTOS, FN$CANTPRODUCTOS
		ASSIGN		PIEZAS, FN$CANTPIEZAS
		
;SE TOMA EL PEDIDO
		
		QUEUE			TOMAR
		SEIZE			TOMAR
		DEPART		TOMAR
		;ADVANCE DEPENDE DE SI ES EN MOSTRADOR O TELEFONO
		RELEASE		TOMAR
		
;SE PREPARA EL PEDIDO
		
		QUEUE 		PREPARAR
		ENTER			PREPARAR
		DEPART		PREPARAR
		ADVANCE		300, 120		;TIEMPO QUE TARDAN EN PREPARAR EL PEDIDO
		ASSIGN		AUXPROD, P$PRODUCTOS
OTROPROD	ADVANCE		5, 2			;TIEMPO QUE TARDA POR PRODUCTO
		LOOP			AUXPROD, OTROPROD
		
		ASSIGN		AUXPIEZAS, V$CJTOPIEZAS
		TEST	L		P$PIEZAS, 20, SIGUE
OTRAPIEZA	ADVANCE		3, 1			;TIEMPO QUE TARDA POR CONJUNTO DE 20 PIEZAS
		LOOP			AUXPIEZAS, OTRAPIEZA
SIGUE		LEAVE			PREPARAR
	
;SE FACTURA EL PEDIDO
		
		QUEUE			FACTURAR
		SEIZE			FACTURAR
		DEPART		FACTURAR
		ADVANCE		120, 30		;TIEMPO QUE TARDA EN FACTURAR
		ASSIGN		AUXPROD, P$PRODUCTOS
OTRAFAC	ADVANCE		5, 2			;TIEMPO QUE TARDA POR PRODUCTO
		LOOP			AUXPROD, OTRAFAC
		RELEASE		FACTURAR
		
		TERMINATE
		
		
		
		


<\F>
Nombre=
Descripcion=
Version=
Autor=
Empresa=
Opciones=
